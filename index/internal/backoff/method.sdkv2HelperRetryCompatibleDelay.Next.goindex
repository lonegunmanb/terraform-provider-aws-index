package github.com/hashicorp/terraform-provider-aws/internal/backoff
import (
	"context"
	"time"

	inttypes "github.com/hashicorp/terraform-provider-aws/internal/types"
)
func (d *sdkv2HelperRetryCompatibleDelay) Next(n uint) time.Duration {
	if n == 0 {
		return d.initialDelay
	}

	delay := d.delay

	// First round had no wait.
	if delay == 0 {
		delay = 100 * time.Millisecond
	}

	if d.incrementDelay {
		delay *= 2
	}

	// If a poll interval has been specified, choose that interval.
	// Otherwise bound the default value.
	if d.pollInterval > 0 && d.pollInterval < 180*time.Second {
		delay = d.pollInterval
	} else {
		if delay < d.minTimeout {
			delay = d.minTimeout
		} else if delay > 10*time.Second {
			delay = 10 * time.Second
		}
	}

	d.delay = delay

	return delay
}
