package github.com/hashicorp/terraform-provider-aws/internal/backoff
import (
	"context"
	"time"

	inttypes "github.com/hashicorp/terraform-provider-aws/internal/types"
)
func (d *sdkv2HelperRetryCompatibleDelay) delay() time.Duration {
	wait := d.wait

	// First round had no wait.
	if wait == 0 {
		wait = 100 * time.Millisecond
	}

	wait *= 2

	// If a poll interval has been specified, choose that interval.
	// Otherwise bound the default value.
	if d.pollInterval > 0 && d.pollInterval < 180*time.Second {
		wait = d.pollInterval
	} else {
		if wait < d.minTimeout {
			wait = d.minTimeout
		} else if wait > 10*time.Second {
			wait = 10 * time.Second
		}
	}

	d.wait = wait

	return wait
}
