package github.com/hashicorp/terraform-provider-aws/internal/tags/tagpolicy
import (
	"context"

	"github.com/aws/aws-sdk-go-v2/aws"
	"github.com/aws/aws-sdk-go-v2/service/resourcegroupstaggingapi"
	"github.com/aws/aws-sdk-go-v2/service/resourcegroupstaggingapi/types"
	tftags "github.com/hashicorp/terraform-provider-aws/internal/tags"
)
func GetRequiredTags(ctx context.Context, awsConfig aws.Config) (map[string]tftags.KeyValueTags, error) {
	client := resourcegroupstaggingapi.NewFromConfig(awsConfig)
	paginator := resourcegroupstaggingapi.NewListRequiredTagsPaginator(client, &resourcegroupstaggingapi.ListRequiredTagsInput{})

	var reqTags []types.RequiredTag
	for paginator.HasMorePages() {
		page, err := paginator.NextPage(ctx)
		if err != nil {
			return nil, err
		}

		reqTags = append(reqTags, page.RequiredTags...)
	}

	return convert(ctx, reqTags), nil
}
