package github.com/hashicorp/terraform-provider-aws/internal/maps

func ApplyToAllValuesWithError[M ~map[K]V1, K comparable, V1, V2 any](m M, f func(V1) (V2, error)) (map[K]V2, error) {
	n := make(map[K]V2, len(m))

	for k, v1 := range m {
		v2, err := f(v1)
		if err != nil {
			return nil, err
		}
		n[k] = v2
	}

	return n, nil
}
